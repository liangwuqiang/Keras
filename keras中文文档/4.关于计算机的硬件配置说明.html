<!DOCTYPE html>
    <html><head><meta charset="UTF-8">
    </head><body>
    <p><a href="http://keras-cn.readthedocs.io/en/latest/">原文链接</a></p>
        <div class="section">
<p><strong>本教程不得用于任何形式的商业用途，如果需要转载请与作者SCP-173联系，如果发现未经允许复制转载，将保留追求其法律责任的权利。</strong></p>
<hr/>
<h1 id="_1">关于计算机的硬件配置说明</h1>
<h2 id="_2"><strong>推荐配置</strong></h2>
<p>如果您是高校学生或者高级研究人员，并且实验室或者个人资金充沛，建议您采用如下配置：</p>
<ul>
<li>主板：X299型号或Z270型号</li>
<li>CPU:  i7-6950X或i7-7700K 及其以上高级型号</li>
<li>内存：品牌内存，总容量32G以上，根据主板组成4通道或8通道</li>
<li>SSD： 品牌固态硬盘，容量256G以上</li>
<li><font color="#FF0000">显卡：NVIDIA GTX TITAN(XP) NVIDIA GTX 1080ti、NVIDIA GTX TITAN、NVIDIA GTX 1080、NVIDIA GTX 1070、NVIDIA GTX 1060 (顺序为优先建议，并且建议同一显卡，可以根据主板插槽数量购买多块，例如X299型号主板最多可以采用×4的显卡)</font></li>
<li>电源：由主机机容量的确定，一般有显卡总容量后再加200W即可</li>
</ul>
<h2 id="_3"><strong>最低配置</strong></h2>
<p>如果您是仅仅用于自学或代码调试，亦或是条件所限仅采用自己现有的设备进行开发，那么您的电脑至少满足以下几点：</p>
<ul>
<li>CPU：Intel第三代i5和i7以上系列产品或同性能AMD公司产品</li>
<li>内存：总容量4G以上</li>
</ul>
<h2 id="cpu"><font color="#FF0000">CPU说明</font></h2>
<ul>
<li>大多数CPU目前支持多核多线程，那么如果您采用CPU加速，就可以使用多线程运算。这方面的优势对于服务器CPU志强系列尤为关键</li>
</ul>
<h2 id="_4"><font color="#FF0000">显卡说明</font></h2>
<ul>
<li>如果您的显卡是非NVIDIA公司的产品或是NVIDIA GTX系列中型号的第一个数字低于6或NVIDIA的GT系列，都不建议您采用此类显卡进行加速计算，例如<code>NVIDIA GT 910</code>、<code>NVIDIA GTX 460</code> 等等。</li>
<li>如果您的显卡为笔记本上的GTX移动显卡（型号后面带有标识M），那么请您慎重使用显卡加速，因为移动版GPU容易发生过热烧毁现象。</li>
<li>如果您的显卡，显示的是诸如 <code>HD5000</code>,<code>ATI 5650</code> 等类型的显卡，那么您只能使用CPU加速</li>
<li>如果您的显卡芯片为Pascal架构（<code>NVIDIA GTX 1080</code>,<code>NVIDIA GTX 1070</code>等），您只能在之后的配置中选择<code>CUDA 8.0</code></li>
</ul>
<hr/>
<h1 id="_5">基本开发环境搭建</h1>
<h2 id="1-linux">1. Linux 发行版</h2>
<p>linux有很多发行版，本文强烈建议读者采用新版的<code>Ubuntu 16.04 LTS</code>
一方面，对于大多数新手来说Ubuntu具有很好的图形界面，与乐观的开源社区；另一方面，Ubuntu是Nvidia官方以及绝大多数深度学习框架默认开发环境。
个人不建议使用Ubuntu其他版本，由于GCC编译器版本不同，会导致很多依赖无法有效安装。
Ubuntu 16.04 LTS<font color="#FF0000">下载地址</font>：http://www.ubuntu.org.cn/download/desktop
<img alt="" src="images/2d9ca64e9c57195b19c913c4b666c8c6.png"/>
通过U盘安装好后，进行初始化环境设置。</p>
<h2 id="2-ubuntu">2. Ubuntu初始环境设置</h2>
<ul>
<li>安装开发包
打开<code>终端</code>输入：</li>
</ul>
<pre><code class="bash"># 系统升级
&gt;&gt;&gt; sudo apt update
&gt;&gt;&gt; sudo apt upgrade
# 安装python基础开发包
&gt;&gt;&gt; sudo apt install -y python-dev python-pip python-nose gcc g++ git gfortran vim
</code></pre>
<ul>
<li>安装运算加速库
打开<code>终端</code>输入：</li>
</ul>
<pre><code>&gt;&gt;&gt; sudo apt install -y libopenblas-dev liblapack-dev libatlas-base-dev
</code></pre>
<h2 id="3-cudacpu">3. CUDA开发环境的搭建(CPU加速跳过)</h2>
<p><strong><em>如果您的仅仅采用cpu加速，可跳过此步骤</em></strong>
 - 下载CUDA8.0</p>
<p>下载地址：https://developer.nvidia.com/cuda-downloads
<img alt="" src="images/0632704aad6c77168ff54ff9fade10cc.png"/></p>
<p>之后打开<code>终端</code>输入：</p>
<pre><code>&gt;&gt;&gt; sudo dpkg -i cuda-repo-ubuntu1604-8-0-local-ga2_8.0.61-1_amd64.deb
&gt;&gt;&gt; sudo apt update
&gt;&gt;&gt; sudo apt -y install cuda
</code></pre>
<p>自动配置成功就好。</p>
<ul>
<li>将CUDA路径添加至环境变量
在<code>终端</code>输入：</li>
</ul>
<pre><code>&gt;&gt;&gt; sudo gedit /etc/profile
</code></pre>
<p>在<code>profile</code>文件中添加：</p>
<pre><code class="bash">export CUDA_HOME=/usr/local/cuda-8.0
export PATH=/usr/local/cuda-8.0/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
</code></pre>
<p>之后<code>source /etc/profile</code>即可</p>
<ul>
<li>测试
在<code>终端</code>输入：</li>
</ul>
<pre><code>&gt;&gt;&gt; nvcc -V
</code></pre>
<p>会得到相应的nvcc编译器相应的信息，那么CUDA配置成功了。(<strong>记得重启系统</strong>)</p>
<p>如果要进行<code>cuda性能测试</code>，可以进行：</p>
<pre><code class="shell">&gt;&gt;&gt; cd /usr/local/cuda/samples
&gt;&gt;&gt; sudo make -j8
</code></pre>
<p>编译完成后，可以进<code>samples/bin/.../.../...</code>的底层目录，运行各类实例。</p>
<h2 id="4-cudnn">4. 加速库cuDNN（可选）</h2>
<p>从官网下载需要注册账号申请，两三天批准。网盘搜索一般也能找到最新版。
Linux目前最新的版本是cudnn V6，但对于tensorflow的预编译版本还不支持这个最近版本，建议采用5.1版本，即是cudnn-8.0-win-x64-v5.1-prod.zip。
下载解压出来是名为cuda的文件夹，里面有bin、include、lib，将三个文件夹复制到安装CUDA的地方覆盖对应文件夹，在终端中输入：</p>
<pre><code class="shell">&gt;&gt;&gt; sudo cp include/cudnn.h /usr/local/cuda/include/
&gt;&gt;&gt; sudo cp lib64/* /usr/local/cuda/lib64/
&gt;&gt;&gt; cd /usr/local/cuda/lib64
&gt;&gt;&gt; sudo ln -sf libcudnn.so.5.1.10 libcudnn.so.5
&gt;&gt;&gt; sudo ln -sf libcudnn.so.5 libcudnn.so
&gt;&gt;&gt; sudo ldconfig -v
</code></pre>
<h1 id="keras">Keras框架搭建</h1>
<h2 id="_6">相关开发包安装</h2>
<p>在<code>终端</code>中输入:</p>
<pre><code class="shell">&gt;&gt;&gt; sudo pip install -U --pre pip setuptools wheel
&gt;&gt;&gt; sudo pip install -U --pre numpy scipy matplotlib scikit-learn scikit-image
&gt;&gt;&gt; sudo pip install -U --pre tensorflow-gpu
# &gt;&gt;&gt; sudo pip install -U --pre tensorflow ## CPU版本
&gt;&gt;&gt; sudo pip install -U --pre keras
</code></pre>
<p>安装完毕后，输入<code>python</code>，然后输入：</p>
<pre><code class="python">&gt;&gt;&gt; import tensorflow
&gt;&gt;&gt; import keras
</code></pre>
<p>无错输出即可</p>
<h2 id="kerasmnist">Keras中mnist数据集测试</h2>
<p>下载Keras开发包</p>
<pre><code class="shell">&gt;&gt;&gt; git clone https://github.com/fchollet/keras.git
&gt;&gt;&gt; cd keras/examples/
&gt;&gt;&gt; python mnist_mlp.py
</code></pre>
<p>程序无错进行，至此，keras安装完成。</p>
<h2 id="_7">声明与联系方式</h2>
<p>由于作者水平和研究方向所限，无法对所有模块都非常精通，因此文档中不可避免的会出现各种错误、疏漏和不足之处。如果您在使用过程中有任何意见、建议和疑问，欢迎发送邮件到scp173.cool@gmail.com与作者取得联系.</p>
<p><strong>本教程不得用于任何形式的商业用途，如果需要转载请与作者或中文文档作者联系，如果发现未经允许复制转载，将保留追求其法律责任的权利。</strong></p>
<p>作者：<a href="https://github.com/KaiwenXiao">SCP-173</a>
E-mail ：scp173.cool@gmail.com
<strong>如果您需要及时得到指导帮助，可以加微信：SCP173-cool，酌情打赏即可</strong>
<img alt="微信" src="images/397b3d40a97ef515197eee63ce228e7c.png"/></p>
</div>
    </body></html>